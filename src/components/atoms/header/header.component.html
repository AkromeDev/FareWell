<div [ngClass]="{ scrolled: scrolled }" class="nav-bar">
  <a [routerLink]="'/'" class="nav-logo" (click)="setActiveTab('home')">FareWell</a>

  <!-- Burger Icon -->
  <div class="burger" (click)="toggleMenu()" aria-label="Menu öffnen" role="button" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- Nav links -->
  <div class="nav-links-container" [ngClass]="{ open: menuOpen }">
    <a
      href="https://salonkee.de/salon/farewell?lang=de"
      target="_blank"
      rel="noopener noreferrer"
      class="nav-link"
    >
      Termin Buchen
    </a>

    <!-- ✅ Behandlungen: underline stays when dropdown open OR on /behandlungen/... routes -->
    <div
      class="nav-item behandlungen"
      [class.is-open]="behandlungenOpen"
      [class.is-active]="isBehandlungenRoute"
    >
      <div
        class="behandlungen-trigger"
        (mouseenter)="onBehandlungenEnter()"
        (mouseleave)="onBehandlungenLeave()"
      >
        <button
          type="button"
          class="nav-link nav-link-btn"
          [class.active]="isBehandlungenRoute || behandlungenOpen"
          [attr.aria-expanded]="behandlungenOpen"
          (click)="toggleBehandlungen($event)"
        >
          Behandlungen
          <span class="chevron" [ngClass]="{ open: behandlungenOpen }">▾</span>
        </button>
      </div>
    </div>

    <a
      [routerLink]="'/zeit'"
      routerLinkActive="active"
      (click)="setActiveTab('zeit')"
      class="nav-link"
    >
      Elektrolyse-Zeitberechnung
    </a>

    <a
      [routerLink]="'/historie'"
      routerLinkActive="active"
      (click)="setActiveTab('historie')"
      class="nav-link"
    >
      Historie
    </a>

    <a
      [routerLink]="'/price'"
      routerLinkActive="active"
      (click)="setActiveTab('price')"
      class="nav-link"
    >
      Preis
    </a>
  </div>

  <div class="behandlungen-panel" [ngClass]="{ open: behandlungenOpen }">
    <div
      class="panel-inner"
      (mouseenter)="onBehandlungenEnter()"
      (mouseleave)="onBehandlungenLeave()"
    >
      <a
        class="treatment-card"
        *ngFor="let t of treatments"
        [routerLink]="t.route"
        (click)="setActiveTab('behandlungen')"
      >
        <div class="card-image" [style.backgroundImage]="'url(' + t.image + ')'">
          <div class="image-overlay"></div>
          <div class="card-title">{{ t.title }}</div>
        </div>
        <div class="card-desc">{{ t.description }}</div>
      </a>
    </div>
  </div>
</div>
